<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Bienvenido a Uni-Eats Marketplace</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Meta refresh como respaldo para logout (solo si hay parámetro logout) -->
    <meta th:if="${param.logout}" http-equiv="refresh" content="15;url=/login">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <!-- PWA Icons -->
    
    <style>
        body { 
            font-family: 'Poppins', sans-serif; 
            overflow: hidden;
        }
        #bg-video {
            position: fixed; top: 50%; left: 50%;
            min-width: 100%; min-height: 100%;
            width: auto; height: auto; z-index: -1;
            transform: translateX(-50%) translateY(-50%);
            background-size: cover;
            filter: blur(8px) brightness(0.7);
        }
        @keyframes fadeInUp { 
            from { opacity: 0; transform: translateY(30px) scale(0.98); } 
            to { opacity: 1; transform: translateY(0) scale(1); } 
        }
        .animate-fadeInUp { 
            animation: fadeInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        /* Estilos para el countdown de logout */
        #logout-countdown {
            display: inline-block;
            transition: all 0.3s ease;
            color: #059669;
        }
        
        .logout-success {
            animation: slideInDown 0.5s ease-out;
        }
        
        @keyframes slideInDown {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* --- CSS "SÚPER PRO" CON FLOATING LABELS --- */
        .floating-label {
            position: absolute;
            top: 50%;
            left: 1rem;
            transform: translateY(-50%);
            color: #9ca3af; /* gray-400 */
            transition: all 0.2s ease-out;
            pointer-events: none;
            background-color: #ffffff; /* Fondo blanco para que tape el borde */
            padding: 0 0.25rem;
        }

        .input-field:focus + .floating-label,
        .input-field:not(:placeholder-shown) + .floating-label {
            top: 0;
            left: 0.75rem;
            font-size: 0.75rem; /* 12px */
            color: #f59e0b; /* amber-500 */
            transform: translateY(-50%) scale(1);
        }
    </style>
</head>
<body class="antialiased text-slate-800">

    <video autoplay muted loop id="bg-video">
      <source src="https://assets.mixkit.co/videos/preview/mixkit-top-down-view-of-a-person-eating-a-sushi-roll-42173-large.mp4" type="video/mp4">
      Tu navegador no soporta videos HTML5.
    </video>

    <div class="flex items-center justify-center min-h-screen p-4">
        
        <div class="w-full max-w-4xl grid md:grid-cols-2 rounded-2xl shadow-2xl overflow-hidden animate-fadeInUp">
            
            <div class="hidden md:block">
                <img src="https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" 
                     alt="Plato de comida saludable" 
                     class="w-full h-full object-cover">
            </div>

            <div class="w-full bg-white/80 backdrop-blur-lg p-8 sm:p-12 flex flex-col justify-center">
                
                <div class="text-center mb-8">
                    <!-- ===== LOGO DE LA UNIVERSIDAD AÑADIDO ===== -->
                    <img src="data:image/jpeg;base64,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" alt="Logo Uniremington" class="w-20 h-20 mx-auto mb-4">
                    <h1 class="text-3xl font-extrabold text-slate-900">Bienvenido a Uni-Eats</h1>
                    <p class="text-slate-600 mt-2">Tu comida favorita, a un clic de distancia.</p>
                </div>

                <!-- Alertas -->
                <div th:if="${param.error}" class="mb-4 p-3 text-sm text-red-800 bg-red-100 border-l-4 border-red-500 rounded-md flex items-center">
                    <i class="fas fa-exclamation-triangle mr-3"></i>
                    <span>Correo o contraseña inválidos.</span>
                </div>
                <div th:if="${param.logout}" class="mb-6 p-6 bg-green-100 border-2 border-green-300 rounded-lg" style="background-color: #dcfce7 !important; border-color: #22c55e !important;">
                    <div class="text-center">
                        <div class="mb-4">
                            <i class="fas fa-check-circle text-4xl text-green-600"></i>
                        </div>
                        <h3 class="text-xl font-bold text-green-800 mb-2">¡Sesión cerrada exitosamente!</h3>
                        <p class="text-green-700 mb-4">Puedes iniciar sesión nuevamente cuando lo desees.</p>
                        
                        <div class="bg-white p-4 rounded-lg border border-green-200 mb-4">
                            <div class="text-green-600 mb-3">
                                <i class="fas fa-clock mr-2"></i>
                                <span>Redirigiendo automáticamente en</span>
                            </div>
                            <div class="text-2xl font-bold text-green-800" id="logout-countdown">10</div>
                            <div class="text-sm text-green-600">segundos</div>
                        </div>
                        
                        <button type="button" onclick="redirectToLogin();" 
                                class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-8 rounded-lg transition duration-200 shadow-lg transform hover:scale-105">
                            <i class="fas fa-sign-in-alt mr-2"></i>
                            Ir al Login Ahora
                        </button>
                        
                        <!-- Botones adicionales de emergencia -->
                        <div class="mt-3 space-y-2">
                            <a href="/login" class="block w-full bg-blue-500 hover:bg-blue-600 text-white text-sm font-semibold py-2 px-4 rounded-md transition duration-200 text-center">
                                🔄 Enlace directo al login
                            </a>
                            <button onclick="window.location.href='/login';" class="block w-full bg-orange-500 hover:bg-orange-600 text-white text-sm font-semibold py-2 px-4 rounded-md transition duration-200">
                                ⚡ Redirección JavaScript
                            </button>
                            <button onclick="window.location.reload();" class="block w-full bg-gray-500 hover:bg-gray-600 text-white text-sm font-semibold py-2 px-4 rounded-md transition duration-200">
                                🔄 Recargar página
                            </button>
                        </div>
                    </div>
                </div>
                <div th:if="${success}" class="mb-4 p-3 text-sm text-green-800 bg-green-100 border-l-4 border-green-500 rounded-md flex items-center">
                    <i class="fas fa-check-circle mr-3"></i>
                    <p th:text="${success}"></p>
                </div>

                <form th:action="@{/login}" method="post" autocomplete="off" class="space-y-8">
                    <!-- ===== CAMPO DE CORREO MEJORADO ===== -->
                    <div class="relative">
                        <input type="email" id="username" name="username" required placeholder=" "
                               class="input-field block w-full px-4 py-3 bg-transparent border-2 border-slate-300 rounded-lg focus:outline-none focus:ring-0 focus:border-amber-500 transition">
                        <label for="username" class="floating-label">Correo Electrónico</label>
                    </div>
                    
                    <!-- ===== CAMPO DE CONTRASEÑA MEJORADO ===== -->
                    <div class="relative">
                        <input type="password" id="password" name="password" required placeholder=" "
                               class="input-field block w-full px-4 py-3 bg-transparent border-2 border-slate-300 rounded-lg focus:outline-none focus:ring-0 focus:border-amber-500 transition">
                        <label for="password" class="floating-label">Contraseña</label>
                        <button type="button" id="togglePassword" class="absolute inset-y-0 right-0 flex items-center px-4 text-slate-400 hover:text-slate-600">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    
                    <div>
                        <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-base font-bold text-white bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-all duration-300 ease-in-out transform hover:scale-105">
                            Ingresar
                        </button>
                    </div>
                </form>

                <div class="text-center mt-8 space-y-2 text-sm">
                    <a th:href="@{/forgot-password}" class="text-slate-500 hover:text-amber-600 hover:underline">
                        ¿Olvidaste tu contraseña?
                    </a>
                    <p class="text-slate-600">
                        ¿Eres nuevo? 
                        <a th:href="@{/registro}" class="font-bold text-amber-600 hover:underline">Crea tu cuenta aquí</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const togglePasswordBtn = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('password');
        const eyeIcon = togglePasswordBtn.querySelector('i');

        togglePasswordBtn.addEventListener('click', () => {
            const isPassword = passwordInput.type === 'password';
            passwordInput.type = isPassword ? 'text' : 'password';
            eyeIcon.classList.toggle('fa-eye', !isPassword);
            eyeIcon.classList.toggle('fa-eye-slash', isPassword);
        });

        // ===== DIAGNÓSTICO Y SOLUCIÓN ROBUSTA PARA LOGOUT =====
        
        console.log('🔍 DIAGNÓSTICO INICIAL:');
        console.log('- URL actual:', window.location.href);
        console.log('- Search params:', window.location.search);
        console.log('- Document ready state:', document.readyState);
        console.log('- User agent:', navigator.userAgent);
        
        // ===== SOLUCIÓN ROBUSTA PARA LOGOUT CON MÚLTIPLES FALLBACKS =====
        
        function redirectToLogin() {
            console.log('🚀 REDIRECT: Iniciando redirección múltiple...');
            
            // Método 1: Redirección inmediata con replace
            try {
                console.log('🔄 Método 1: window.location.replace');
                window.location.replace('/login');
                return;
            } catch (e) {
                console.error('❌ Método 1 falló:', e);
            }
            
            // Método 2: Redirección con href
            try {
                console.log('🔄 Método 2: window.location.href');
                window.location.href = '/login';
                return;
            } catch (e) {
                console.error('❌ Método 2 falló:', e);
            }
            
            // Método 3: Forzar recarga completa
            try {
                console.log('🔄 Método 3: window.location.assign');
                window.location.assign('/login');
                return;
            } catch (e) {
                console.error('❌ Método 3 falló:', e);
            }
            
            // Método 4: Recarga completa como último recurso
            console.log('🔄 Método 4: Recarga completa');
            window.location.reload(true);
        }
        
        // Auto-redirección inmediata si hay parámetro logout
        if (window.location.search.includes('logout')) {
            console.log('✅ LOGOUT DETECTADO - Iniciando proceso...');
            
            // Configurar redirección automática después de 10 segundos
            let timeLeft = 10;
            const countdownElement = document.getElementById('logout-countdown');
            
            // Actualizar countdown cada segundo
            const interval = setInterval(() => {
                timeLeft--;
                if (countdownElement) {
                    countdownElement.textContent = timeLeft;
                }
                console.log('⏰ Tiempo restante:', timeLeft, 'segundos');
                
                if (timeLeft <= 0) {
                    clearInterval(interval);
                    console.log('⏰ Tiempo agotado - Ejecutando redirección');
                    redirectToLogin();
                }
            }, 1000);
            
            // También configurar un fallback adicional por si acaso
            setTimeout(() => {
                console.log('🚨 FALLBACK: Ejecutando redirección de emergencia');
                redirectToLogin();
            }, 12000); // 12 segundos como respaldo
        }
    </script>
</body>
</html>

